<div class="matriz-legal-form-container">
  <h2>Nueva Matriz de Obligación</h2>
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="form-group">
      <label for="legal_compliance">Cumplimiento legal</label>
      <textarea 
        id="legal_compliance" 
        formControlName="legal_compliance" 
        placeholder="Ingrese el cumplimiento legal">
      </textarea>
      <div class="error-message" *ngIf="form.get('legal_compliance')?.touched && form.get('legal_compliance')?.invalid">
        El cumplimiento legal es requerido
      </div>
    </div>

    <div class="form-group">
      <label for="legal_regulation">Regulación legal</label>
      <textarea 
        id="legal_regulation" 
        formControlName="legal_regulation" 
        placeholder="Ingrese la regulación legal">
      </textarea>
      <div class="error-message" *ngIf="form.get('legal_regulation')?.touched && form.get('legal_regulation')?.invalid">
        La regulación legal es requerida
      </div>
    </div>

    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea id="description" formControlName="description" placeholder="Descripción de la matriz"></textarea>
      <div class="error-message" *ngIf="form.get('description')?.touched && form.get('description')?.invalid">
        La descripción es requerida
      </div>
    </div>    <div class="form-group">
      <label for="department_id">Departamento</label>
      <select id="department_id" formControlName="department_id">
        <option [ngValue]="null">Seleccionar...</option>
        <option *ngFor="let departamento of departamentos" [value]="departamento.id">
          {{ departamento.name }}
        </option>
      </select>
      <div class="error-message" *ngIf="form.get('department_id')?.touched && form.get('department_id')?.invalid">
        El departamento es requerido
      </div>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="success" class="success">¡Matriz de obligación guardada exitosamente!</div>

    <div class="form-actions">
      <button type="submit" [disabled]="form.invalid || loading">
        {{ loading ? 'Guardando...' : 'Guardar' }}
      </button>
      <button type="button" (click)="form.reset()">Cancelar</button>
    </div>
  </form>
</div>