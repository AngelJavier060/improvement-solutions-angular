<div class="welcome-container">
  <div class="container-fluid min-vh-100 bg-gradient-light">
    
    <!-- Header con información de la empresa -->
    <div class="welcome-header py-5 bg-white shadow-sm border-bottom">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-8">
            <div class="d-flex align-items-center">
              <div class="company-logo me-4">
                <div class="logo-circle bg-primary d-flex align-items-center justify-content-center">
                  <i class="fas fa-building fa-3x text-white"></i>
                </div>
              </div>
              <div>
                <h1 class="h2 fw-bold text-dark mb-2">{{ empresaNombre || 'Empresa no disponible' }}</h1>
                <p class="text-muted mb-1">RUC: {{ empresaRuc || 'No disponible' }}</p>
                <p class="text-success mb-0">
                  <i class="fas fa-circle me-1" style="font-size: 8px;"></i>
                  Sistema activo
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4 text-md-end">
            <div class="user-info">
              <div class="d-flex align-items-center justify-content-md-end">
                <div class="me-3 text-end">
                  <div class="fw-bold text-dark">{{ usuario?.name || 'Usuario' }}</div>
                  <small class="text-muted">{{ usuario?.username || 'Sin usuario' }}</small>
                </div>
                <div class="user-avatar">
                  <div class="avatar-circle bg-secondary d-flex align-items-center justify-content-center">
                    <i class="fas fa-user text-white"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mensaje de bienvenida -->
    <div class="welcome-message py-4">
      <div class="container">
        <div class="alert alert-success border-0 shadow-sm bg-success bg-opacity-10">
          <div class="row align-items-center">
            <div class="col-auto">
              <div class="welcome-icon bg-success bg-opacity-20 rounded-circle p-0 d-flex align-items-center justify-content-center" style="overflow:hidden;">
                <ng-container *ngIf="empresaLogoUrl; else defaultCheck">
                  <img [src]="empresaLogoUrl" alt="Logo de la empresa" style="width:56px;height:56px;object-fit:cover;border-radius:50%;" />
                </ng-container>
                <ng-template #defaultCheck>
                  <i class="fas fa-check-circle fa-2x text-success"></i>
                </ng-template>
              </div>
            </div>
            <div class="col">
              <h4 class="alert-heading text-success fw-bold mb-2">
                ¡Bienvenido al Sistema de {{ empresaNombre || 'tu empresa' }}!
              </h4>
              <p class="mb-2 text-dark">
                Has ingresado exitosamente. Tu sesión está activa y el sistema está listo para que comiences a trabajar.
              </p>
              <small class="text-muted">
                <i class="fas fa-calendar-alt me-1"></i>
                Fecha de acceso: {{ fechaAcceso }}
                <span *ngIf="usuario?.businesses" class="ms-3">
                  <i class="fas fa-building me-1"></i>
                  Empresas disponibles: {{ usuario.businesses.length }}
                </span>
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Servicios y módulos disponibles -->
    <div class="services-section py-5">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="h3 fw-bold text-dark mb-3">Servicios Disponibles</h2>
          <p class="text-muted">Nuestra motivación es su confianza y nuestro compromiso, la solución óptima.</p>
        </div>

        <!-- Categorías de servicios -->
        <div class="row g-4">
          
          <!-- Talento Humano -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('talento-humano')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('talento-humano')">
                <div class="card-body text-center p-4">
                  <!-- Toggle switch para admin -->
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('talento-humano')"
                             [disabled]="togglingModule === 'TALENTO_HUMANO'"
                             (change)="onToggleModule(getModuleDto('talento-humano')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('talento-humano')" [class.text-muted]="!isModuleActive('talento-humano')">
                      {{ isModuleActive('talento-humano') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'TALENTO_HUMANO'" class="spinner-border spinner-border-sm text-primary ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-users fa-3x" [class.text-primary]="isModuleActive('talento-humano')" [class.text-muted]="!isModuleActive('talento-humano')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Talento Humano</h5>
                  <p class="card-text text-muted small">Gestión completa de recursos humanos y desarrollo del talento.</p>
                  <div class="mb-2" *ngIf="isModuleActive('talento-humano')">
                    <span *ngIf="isModuleUnlimited('talento-humano')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('talento-humano')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('talento-humano') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('talento-humano')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-primary]="isModuleActive('talento-humano')" [class.btn-outline-secondary]="!isModuleActive('talento-humano')" [disabled]="!isModuleActive('talento-humano')" (click)="goToModule('talento-humano')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Seguridad Industrial -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('seguridad-industrial')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('seguridad-industrial')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('seguridad-industrial')"
                             [disabled]="togglingModule === 'SEGURIDAD_INDUSTRIAL'"
                             (change)="onToggleModule(getModuleDto('seguridad-industrial')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('seguridad-industrial')" [class.text-muted]="!isModuleActive('seguridad-industrial')">
                      {{ isModuleActive('seguridad-industrial') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'SEGURIDAD_INDUSTRIAL'" class="spinner-border spinner-border-sm text-warning ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-hard-hat fa-3x" [class.text-warning]="isModuleActive('seguridad-industrial')" [class.text-muted]="!isModuleActive('seguridad-industrial')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Seguridad Industrial</h5>
                  <p class="card-text text-muted small">Protocolos y medidas de seguridad para el entorno laboral.</p>
                  <div class="mb-2" *ngIf="isModuleActive('seguridad-industrial')">
                    <span *ngIf="isModuleUnlimited('seguridad-industrial')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('seguridad-industrial')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('seguridad-industrial') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('seguridad-industrial')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-warning]="isModuleActive('seguridad-industrial')" [class.btn-outline-secondary]="!isModuleActive('seguridad-industrial')" [disabled]="!isModuleActive('seguridad-industrial')" (click)="goToModule('seguridad-industrial')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Médico -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('medico')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('medico')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('medico')"
                             [disabled]="togglingModule === 'MEDICO'"
                             (change)="onToggleModule(getModuleDto('medico')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('medico')" [class.text-muted]="!isModuleActive('medico')">
                      {{ isModuleActive('medico') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'MEDICO'" class="spinner-border spinner-border-sm text-success ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-stethoscope fa-3x" [class.text-success]="isModuleActive('medico')" [class.text-muted]="!isModuleActive('medico')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Médico</h5>
                  <p class="card-text text-muted small">Servicios médicos y seguimiento de salud ocupacional.</p>
                  <div class="mb-2" *ngIf="isModuleActive('medico')">
                    <span *ngIf="isModuleUnlimited('medico')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('medico')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('medico') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('medico')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-success]="isModuleActive('medico')" [class.btn-outline-secondary]="!isModuleActive('medico')" [disabled]="!isModuleActive('medico')" (click)="goToModule('medico')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Calidad -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('calidad')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('calidad')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('calidad')"
                             [disabled]="togglingModule === 'CALIDAD'"
                             (change)="onToggleModule(getModuleDto('calidad')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('calidad')" [class.text-muted]="!isModuleActive('calidad')">
                      {{ isModuleActive('calidad') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'CALIDAD'" class="spinner-border spinner-border-sm text-info ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-certificate fa-3x" [class.text-info]="isModuleActive('calidad')" [class.text-muted]="!isModuleActive('calidad')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Calidad</h5>
                  <p class="card-text text-muted small">Control y aseguramiento de la calidad en procesos.</p>
                  <div class="mb-2" *ngIf="isModuleActive('calidad')">
                    <span *ngIf="isModuleUnlimited('calidad')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('calidad')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('calidad') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('calidad')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-info]="isModuleActive('calidad')" [class.btn-outline-secondary]="!isModuleActive('calidad')" [disabled]="!isModuleActive('calidad')" (click)="goToModule('calidad')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Mantenimiento -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('mantenimiento')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('mantenimiento')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('mantenimiento')"
                             [disabled]="togglingModule === 'MANTENIMIENTO'"
                             (change)="onToggleModule(getModuleDto('mantenimiento')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('mantenimiento')" [class.text-muted]="!isModuleActive('mantenimiento')">
                      {{ isModuleActive('mantenimiento') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'MANTENIMIENTO'" class="spinner-border spinner-border-sm text-secondary ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-tools fa-3x" [class.text-secondary]="!isModuleActive('mantenimiento')" [style.color]="isModuleActive('mantenimiento') ? '#6c757d' : ''"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Mantenimiento</h5>
                  <p class="card-text text-muted small">Gestión de mantenimiento preventivo y correctivo.</p>
                  <div class="mb-2" *ngIf="isModuleActive('mantenimiento')">
                    <span *ngIf="isModuleUnlimited('mantenimiento')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('mantenimiento')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('mantenimiento') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('mantenimiento')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-secondary]="true" [disabled]="!isModuleActive('mantenimiento')" (click)="goToModule('mantenimiento')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Medio Ambiente -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('medio-ambiente')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('medio-ambiente')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('medio-ambiente')"
                             [disabled]="togglingModule === 'MEDIO_AMBIENTE'"
                             (change)="onToggleModule(getModuleDto('medio-ambiente')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('medio-ambiente')" [class.text-muted]="!isModuleActive('medio-ambiente')">
                      {{ isModuleActive('medio-ambiente') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'MEDIO_AMBIENTE'" class="spinner-border spinner-border-sm text-success ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-leaf fa-3x" [class.text-success]="isModuleActive('medio-ambiente')" [class.text-muted]="!isModuleActive('medio-ambiente')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Medio Ambiente</h5>
                  <p class="card-text text-muted small">Gestión ambiental y sostenibilidad empresarial.</p>
                  <div class="mb-2" *ngIf="isModuleActive('medio-ambiente')">
                    <span *ngIf="isModuleUnlimited('medio-ambiente')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('medio-ambiente')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('medio-ambiente') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('medio-ambiente')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-success]="isModuleActive('medio-ambiente')" [class.btn-outline-secondary]="!isModuleActive('medio-ambiente')" [disabled]="!isModuleActive('medio-ambiente')" (click)="goToModule('medio-ambiente')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Producción -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('produccion')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('produccion')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('produccion')"
                             [disabled]="togglingModule === 'PRODUCCION'"
                             (change)="onToggleModule(getModuleDto('produccion')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('produccion')" [class.text-muted]="!isModuleActive('produccion')">
                      {{ isModuleActive('produccion') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'PRODUCCION'" class="spinner-border spinner-border-sm text-primary ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-industry fa-3x" [class.text-primary]="isModuleActive('produccion')" [class.text-muted]="!isModuleActive('produccion')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Producción</h5>
                  <p class="card-text text-muted small">Optimización y control de procesos productivos.</p>
                  <div class="mb-2" *ngIf="isModuleActive('produccion')">
                    <span *ngIf="isModuleUnlimited('produccion')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('produccion')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('produccion') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('produccion')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-primary]="isModuleActive('produccion')" [class.btn-outline-secondary]="!isModuleActive('produccion')" [disabled]="!isModuleActive('produccion')" (click)="goToModule('produccion')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Inventario -->
          <div class="col-lg-3 col-md-6" *ngIf="isModuleVisible('inventario')">
            <div class="service-card h-100">
              <div class="card border-0 shadow-sm h-100 hover-card" [class.module-inactive]="!isModuleActive('inventario')">
                <div class="card-body text-center p-4">
                  <div class="module-toggle-row" *ngIf="isAdmin">
                    <label class="module-switch">
                      <input type="checkbox" [checked]="isModuleActive('inventario')"
                             [disabled]="togglingModule === 'INVENTARIO'"
                             (change)="onToggleModule(getModuleDto('inventario')!)">
                      <span class="module-slider"></span>
                    </label>
                    <small class="module-toggle-label" [class.text-success]="isModuleActive('inventario')" [class.text-muted]="!isModuleActive('inventario')">
                      {{ isModuleActive('inventario') ? 'Activo' : 'Inactivo' }}
                    </small>
                    <div *ngIf="togglingModule === 'INVENTARIO'" class="spinner-border spinner-border-sm text-info ms-1" role="status"></div>
                  </div>
                  <div class="service-icon mb-3">
                    <i class="fas fa-boxes fa-3x" [class.text-info]="isModuleActive('inventario')" [class.text-muted]="!isModuleActive('inventario')"></i>
                  </div>
                  <h5 class="card-title fw-bold mb-3">Inventario</h5>
                  <p class="card-text text-muted small">Control y gestión de inventarios y almacenes.</p>
                  <div class="mb-2" *ngIf="isModuleActive('inventario')">
                    <span *ngIf="isModuleUnlimited('inventario')" class="badge bg-primary bg-opacity-10 text-primary fw-bold" style="font-size:10px">
                      <i class="fas fa-infinity me-1"></i> Ilimitado
                    </span>
                    <span *ngIf="!isModuleUnlimited('inventario')" class="badge bg-success bg-opacity-10 text-success fw-bold" style="font-size:10px">
                      <i class="fas fa-clock me-1"></i> {{ getModuleDaysRemaining('inventario') }} días restantes
                    </span>
                  </div>
                  <div *ngIf="!isModuleActive('inventario')" class="mb-2">
                    <span class="badge bg-secondary bg-opacity-10 text-secondary fw-bold" style="font-size:10px">
                      <i class="fas fa-ban me-1"></i> Desactivado
                    </span>
                  </div>
                  <button class="btn btn-sm mt-auto" [class.btn-outline-info]="isModuleActive('inventario')" [class.btn-outline-secondary]="!isModuleActive('inventario')" [disabled]="!isModuleActive('inventario')" (click)="goToModule('inventario')">
                    <i class="fas fa-arrow-right me-1"></i>
                    Acceder
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Loading state -->
          <div class="col-12" *ngIf="!modulesLoaded">
            <div class="text-center py-5">
              <div class="spinner-border text-primary mb-3" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
              <p class="text-muted">Cargando módulos disponibles...</p>
            </div>
          </div>

          <!-- Mensaje cuando no hay módulos activos -->
          <div class="col-12" *ngIf="modulesLoaded && !hasAnyVisibleModule()">
            <div class="alert alert-info text-center shadow-sm border-0">
              <i class="fas fa-info-circle fa-2x mb-2 d-block"></i>
              <h5 class="fw-bold">No hay módulos habilitados</h5>
              <p class="mb-0">Actualmente no tiene módulos activos para esta empresa. Contacte al administrador del sistema.</p>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Acciones principales -->
    <div class="actions-section py-4 bg-white border-top">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-8">
            <div class="d-flex align-items-center">
              <div class="me-3">
                <i class="fas fa-info-circle text-primary"></i>
              </div>
              <div>
                <div class="fw-bold text-dark">¿Necesitas ayuda?</div>
                <small class="text-muted">Contacta a nuestro equipo de soporte para cualquier consulta.</small>
              </div>
            </div>
          </div>
          <div class="col-md-4 text-md-end mt-3 mt-md-0">
            <button type="button" class="btn btn-outline-danger me-2" (click)="logout()">
              <i class="fas fa-sign-out-alt me-1"></i>
              Cerrar Sesión
            </button>
            <button type="button" class="btn btn-primary" (click)="goToDashboard()">
              <i class="fas fa-tachometer-alt me-1"></i>
              Dashboard
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
