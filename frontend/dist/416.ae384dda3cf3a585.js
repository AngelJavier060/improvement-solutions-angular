"use strict";(self.webpackChunkimprovement_solutions=self.webpackChunkimprovement_solutions||[]).push([[416],{2416:(be,f,o)=>{o.r(f),o.d(f,{EmpresasModule:()=>ge});var m=o(177),a=o(4341),l=o(7681),e=o(4438),v=o(5312),E=o(1626);let u=(()=>{class t{constructor(r){this.http=r,this.apiUrl=`${v.c.apiUrl}/api/v1/businesses`}getAll(){return this.http.get(this.apiUrl)}getById(r){return this.http.get(`${this.apiUrl}/${r}`)}getByUserId(r){return this.http.get(`${this.apiUrl}/byUser/${r}`)}create(r){return this.http.post(this.apiUrl,r)}update(r,n){return this.http.put(`${this.apiUrl}/${r}`,n)}delete(r){return this.http.delete(`${this.apiUrl}/${r}`)}addUserToBusiness(r,n){return this.http.post(`${this.apiUrl}/${r}/users/${n}`,{})}removeUserFromBusiness(r,n){return this.http.delete(`${this.apiUrl}/${r}/users/${n}`)}searchByName(r){return this.http.get(`${this.apiUrl}/public/search?name=${r}`)}getByRuc(r){return this.http.get(`${this.apiUrl}/public/ruc/${r}`)}static{this.\u0275fac=function(n){return new(n||t)(e.KVO(E.Qq))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var h=o(8010);const _=t=>["detalle",t],g=t=>["editar",t];function b(t,i){1&t&&(e.j41(0,"div",11),e.nrm(1,"i",12),e.j41(2,"span"),e.EFF(3,"Cargando empresas..."),e.k0s()())}function F(t,i){if(1&t){const r=e.RV6();e.j41(0,"div",13),e.nrm(1,"i",14),e.j41(2,"span"),e.EFF(3),e.k0s(),e.j41(4,"button",15),e.bIt("click",function(){e.eBV(r);const s=e.XpG();return e.Njj(s.cargarEmpresas())}),e.nrm(5,"i",16),e.EFF(6," Reintentar "),e.k0s()()}if(2&t){const r=e.XpG();e.R7$(3),e.JRh(r.error)}}function k(t,i){if(1&t){const r=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td",4)(14,"div",22)(15,"button",23),e.nrm(16,"i",24),e.k0s(),e.j41(17,"button",25),e.nrm(18,"i",26),e.k0s(),e.j41(19,"button",27),e.bIt("click",function(){const s=e.eBV(r).$implicit,c=e.XpG(3);return e.Njj(c.eliminarEmpresa(s.id))}),e.nrm(20,"i",28),e.k0s()()()()}if(2&t){const r=i.$implicit;e.R7$(2),e.JRh(r.id),e.R7$(2),e.JRh(r.ruc),e.R7$(2),e.JRh(r.name),e.R7$(2),e.JRh(r.nameShort||"-"),e.R7$(2),e.JRh(r.representativeLegal||"-"),e.R7$(2),e.JRh(r.email||"-"),e.R7$(3),e.Y8G("routerLink",e.eq3(8,_,r.id)),e.R7$(2),e.Y8G("routerLink",e.eq3(10,g,r.id))}}function j(t,i){if(1&t&&(e.j41(0,"table",18)(1,"thead")(2,"tr")(3,"th",19),e.EFF(4,"ID"),e.k0s(),e.j41(5,"th"),e.EFF(6,"RUC"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Nombre"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Nombre Corto"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Rep. Legal"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Email"),e.k0s(),e.j41(15,"th",20),e.EFF(16,"Acciones"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,k,21,12,"tr",21),e.k0s()()),2&t){const r=e.XpG(2);e.R7$(18),e.Y8G("ngForOf",r.empresas)}}function C(t,i){1&t&&(e.j41(0,"div",29),e.nrm(1,"i",30),e.j41(2,"p"),e.EFF(3,"No hay empresas disponibles"),e.k0s(),e.j41(4,"button",5),e.EFF(5,"Registrar empresa"),e.k0s()())}function R(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,j,19,1,"table",17)(2,C,6,0,"ng-template",null,0,e.C5r),e.k0s()),2&t){const r=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",n.empresas.length>0)("ngIfElse",r)}}const d=t=>({"is-invalid":t});function I(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El RUC es requerido"),e.k0s())}function G(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El RUC debe tener 13 d\xedgitos num\xe9ricos"),e.k0s())}function x(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,I,2,0,"div",29)(2,G,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.ruc.errors?null:r.f.ruc.errors.required),e.R7$(),e.Y8G("ngIf",null==r.f.ruc.errors?null:r.f.ruc.errors.pattern)}}function N(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El nombre es requerido"),e.k0s())}function y(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El nombre no puede exceder 100 caracteres"),e.k0s())}function T(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,N,2,0,"div",29)(2,y,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.name.errors?null:r.f.name.errors.required),e.R7$(),e.Y8G("ngIf",null==r.f.name.errors?null:r.f.name.errors.maxlength)}}function Y(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El nombre corto no puede exceder 50 caracteres"),e.k0s())}function D(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,Y,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.nameShort.errors?null:r.f.nameShort.errors.maxlength)}}function L(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El representante legal no puede exceder 100 caracteres"),e.k0s())}function U(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,L,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.representativeLegal.errors?null:r.f.representativeLegal.errors.maxlength)}}function S(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"Email inv\xe1lido"),e.k0s())}function X(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,S,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.email.errors?null:r.f.email.errors.email)}}function q(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El tel\xe9fono no puede exceder 20 caracteres"),e.k0s())}function B(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,q,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.phone.errors?null:r.f.phone.errors.maxlength)}}function J(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"La direcci\xf3n no puede exceder 200 caracteres"),e.k0s())}function V(t,i){if(1&t&&(e.j41(0,"div",28),e.DNE(1,J,2,0,"div",29),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.f.address.errors?null:r.f.address.errors.maxlength)}}function w(t,i){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.SpI(" ",r.error," ")}}function M(t,i){1&t&&e.nrm(0,"span",31)}const p=t=>({"is-invalid":t});function O(t,i){1&t&&(e.j41(0,"div",12)(1,"div",13)(2,"span",14),e.EFF(3,"Cargando..."),e.k0s()()())}function H(t,i){if(1&t&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.SpI(" ",r.error," ")}}function z(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El RUC es requerido"),e.k0s())}function P(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El RUC debe tener 13 d\xedgitos num\xe9ricos"),e.k0s())}function K(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,z,2,0,"div",35)(2,P,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.ruc.errors?null:r.f.ruc.errors.required),e.R7$(),e.Y8G("ngIf",null==r.f.ruc.errors?null:r.f.ruc.errors.pattern)}}function Q(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El nombre es requerido"),e.k0s())}function W(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El nombre no puede exceder 100 caracteres"),e.k0s())}function Z(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,Q,2,0,"div",35)(2,W,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.name.errors?null:r.f.name.errors.required),e.R7$(),e.Y8G("ngIf",null==r.f.name.errors?null:r.f.name.errors.maxlength)}}function ee(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El nombre corto no puede exceder 50 caracteres"),e.k0s())}function re(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,ee,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.nameShort.errors?null:r.f.nameShort.errors.maxlength)}}function te(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El representante legal no puede exceder 100 caracteres"),e.k0s())}function se(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,te,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.representativeLegal.errors?null:r.f.representativeLegal.errors.maxlength)}}function ne(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"Email inv\xe1lido"),e.k0s())}function ie(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,ne,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.email.errors?null:r.f.email.errors.email)}}function ae(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"El tel\xe9fono no puede exceder 20 caracteres"),e.k0s())}function oe(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,ae,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.phone.errors?null:r.f.phone.errors.maxlength)}}function me(t,i){1&t&&(e.j41(0,"div"),e.EFF(1,"La direcci\xf3n no puede exceder 200 caracteres"),e.k0s())}function le(t,i){if(1&t&&(e.j41(0,"div",34),e.DNE(1,me,2,0,"div",35),e.k0s()),2&t){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==r.f.address.errors?null:r.f.address.errors.maxlength)}}function de(t,i){1&t&&e.nrm(0,"span",36)}function pe(t,i){if(1&t){const r=e.RV6();e.j41(0,"form",16),e.bIt("ngSubmit",function(){e.eBV(r);const s=e.XpG();return e.Njj(s.onSubmit())}),e.j41(1,"div",1)(2,"div",17)(3,"div",18)(4,"label",19),e.EFF(5,"RUC"),e.k0s(),e.nrm(6,"input",20),e.DNE(7,K,3,2,"div",21),e.k0s()(),e.j41(8,"div",17)(9,"div",18)(10,"label",19),e.EFF(11,"Nombre de la Empresa"),e.k0s(),e.nrm(12,"input",22),e.DNE(13,Z,3,2,"div",21),e.k0s()()(),e.j41(14,"div",1)(15,"div",17)(16,"div",18)(17,"label",19),e.EFF(18,"Nombre Corto"),e.k0s(),e.nrm(19,"input",23),e.DNE(20,re,2,1,"div",21),e.k0s()(),e.j41(21,"div",17)(22,"div",18)(23,"label",19),e.EFF(24,"Representante Legal"),e.k0s(),e.nrm(25,"input",24),e.DNE(26,se,2,1,"div",21),e.k0s()()(),e.j41(27,"div",1)(28,"div",17)(29,"div",18)(30,"label",19),e.EFF(31,"Email"),e.k0s(),e.nrm(32,"input",25),e.DNE(33,ie,2,1,"div",21),e.k0s()(),e.j41(34,"div",17)(35,"div",18)(36,"label",19),e.EFF(37,"Tel\xe9fono"),e.k0s(),e.nrm(38,"input",26),e.DNE(39,oe,2,1,"div",21),e.k0s()()(),e.j41(40,"div",1)(41,"div",27)(42,"div",18)(43,"label",19),e.EFF(44,"Direcci\xf3n"),e.k0s(),e.nrm(45,"textarea",28),e.DNE(46,le,2,1,"div",21),e.k0s()()(),e.j41(47,"div",29)(48,"div",30)(49,"button",31),e.bIt("click",function(){e.eBV(r);const s=e.XpG();return e.Njj(s.cancelar())}),e.EFF(50,"Cancelar"),e.k0s(),e.j41(51,"button",32),e.DNE(52,de,1,0,"span",33),e.EFF(53," Actualizar "),e.k0s()()()()}if(2&t){const r=e.XpG();e.Y8G("formGroup",r.empresaForm),e.R7$(6),e.Y8G("ngClass",e.eq3(17,p,r.submitted&&r.f.ruc.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.ruc.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(19,p,r.submitted&&r.f.name.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.name.errors),e.R7$(6),e.Y8G("ngClass",e.eq3(21,p,r.submitted&&r.f.nameShort.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.nameShort.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(23,p,r.submitted&&r.f.representativeLegal.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.representativeLegal.errors),e.R7$(6),e.Y8G("ngClass",e.eq3(25,p,r.submitted&&r.f.email.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.email.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(27,p,r.submitted&&r.f.phone.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.phone.errors),e.R7$(6),e.Y8G("ngClass",e.eq3(29,p,r.submitted&&r.f.address.errors)),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.address.errors),e.R7$(5),e.Y8G("disabled",r.loading),e.R7$(),e.Y8G("ngIf",r.loading)}}function ue(t,i){1&t&&(e.j41(0,"div",16)(1,"div",17)(2,"span",18),e.EFF(3,"Cargando..."),e.k0s()()())}function fe(t,i){if(1&t&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.SpI(" ",r.error," ")}}function ve(t,i){if(1&t&&(e.j41(0,"div")(1,"div",1)(2,"div",20)(3,"h6",21),e.EFF(4,"Informaci\xf3n b\xe1sica"),e.k0s(),e.j41(5,"div",1)(6,"div",22)(7,"p",23),e.EFF(8,"RUC:"),e.k0s(),e.j41(9,"h6",11),e.EFF(10),e.k0s()(),e.j41(11,"div",22)(12,"p",23),e.EFF(13,"Nombre:"),e.k0s(),e.j41(14,"h6",11),e.EFF(15),e.k0s()()(),e.j41(16,"div",1)(17,"div",22)(18,"p",23),e.EFF(19,"Nombre Corto:"),e.k0s(),e.j41(20,"h6",11),e.EFF(21),e.k0s()(),e.j41(22,"div",22)(23,"p",23),e.EFF(24,"Representante Legal:"),e.k0s(),e.j41(25,"h6",11),e.EFF(26),e.k0s()()()(),e.j41(27,"div",20)(28,"h6",21),e.EFF(29,"Contacto"),e.k0s(),e.j41(30,"div",1)(31,"div",22)(32,"p",23),e.EFF(33,"Email:"),e.k0s(),e.j41(34,"h6",11),e.EFF(35),e.k0s()(),e.j41(36,"div",22)(37,"p",23),e.EFF(38,"Tel\xe9fono:"),e.k0s(),e.j41(39,"h6",11),e.EFF(40),e.k0s()()(),e.j41(41,"div",1)(42,"div",24)(43,"p",23),e.EFF(44,"Direcci\xf3n:"),e.k0s(),e.j41(45,"h6",11),e.EFF(46),e.k0s()()()()(),e.j41(47,"div",25)(48,"div",26)(49,"h6",21),e.EFF(50,"Informaci\xf3n adicional"),e.k0s(),e.j41(51,"div",1)(52,"div",22)(53,"p",23),e.EFF(54,"Fecha de creaci\xf3n:"),e.k0s(),e.j41(55,"h6",11),e.EFF(56),e.nI1(57,"date"),e.k0s()(),e.j41(58,"div",22)(59,"p",23),e.EFF(60,"\xdaltima actualizaci\xf3n:"),e.k0s(),e.j41(61,"h6",11),e.EFF(62),e.nI1(63,"date"),e.k0s()()()()()()),2&t){const r=e.XpG();e.R7$(10),e.JRh(r.empresa.ruc),e.R7$(5),e.JRh(r.empresa.name),e.R7$(6),e.JRh(r.empresa.nameShort||"No especificado"),e.R7$(5),e.JRh(r.empresa.representativeLegal||"No especificado"),e.R7$(9),e.JRh(r.empresa.email||"No especificado"),e.R7$(5),e.JRh(r.empresa.phone||"No especificado"),e.R7$(6),e.JRh(r.empresa.address||"No especificado"),e.R7$(10),e.JRh(e.i5U(57,9,r.empresa.createdAt,"dd/MM/yyyy HH:mm")),e.R7$(6),e.JRh(e.i5U(63,12,r.empresa.updatedAt,"dd/MM/yyyy HH:mm"))}}const Ee=[{path:"",component:(()=>{class t{constructor(r,n,s){this.businessService=r,this.router=n,this.authService=s,this.empresas=[],this.loading=!0,this.error=""}ngOnInit(){this.cargarEmpresas()}cargarEmpresas(){if(this.loading=!0,this.error="",!this.authService.isLoggedIn())return console.log("Usuario no autenticado, redirigiendo a login"),void this.router.navigate(["/auth/login"]);this.businessService.getAll().subscribe({next:r=>{this.empresas=r,this.loading=!1},error:r=>{console.error("Error al cargar empresas:",r),this.loading=!1,403===r.status?(this.error="No tienes permisos para acceder a esta secci\xf3n",this.router.navigate(["/dashboard"])):this.error="Error al cargar las empresas. Por favor, intente nuevamente."}})}eliminarEmpresa(r){confirm("\xbfEst\xe1 seguro de eliminar esta empresa?")&&this.businessService.delete(r).subscribe({next:()=>{this.empresas=this.empresas.filter(n=>n.id!==r)},error:n=>{console.error("Error al eliminar empresa:",n),401===n.status?(this.authService.logout(),this.router.navigate(["/auth/login"])):alert("Error al eliminar la empresa. Por favor, intente nuevamente.")}})}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(u),e.rXU(l.Ix),e.rXU(h.u))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-lista-empresas"]],decls:15,vars:3,consts:[["noData",""],[1,"empresas-container"],[1,"header"],[1,"title-section"],[1,"actions"],["routerLink","nuevo",1,"btn-primary"],[1,"fas","fa-plus"],[1,"card"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[4,"ngIf"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"error-state"],[1,"fas","fa-exclamation-circle"],[1,"btn-retry",3,"click"],[1,"fas","fa-sync"],["class","data-table",4,"ngIf","ngIfElse"],[1,"data-table"],[1,"th-id"],[1,"th-actions"],[4,"ngFor","ngForOf"],[1,"btn-group"],["title","Ver detalles",1,"btn","btn-outline-info","btn-sm",3,"routerLink"],[1,"fas","fa-eye"],["title","Editar empresa",1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"fas","fa-edit"],["title","Eliminar empresa",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[1,"empty-state"],[1,"fas","fa-building"]],template:function(n,s){1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),e.EFF(4,"Empresas"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Administraci\xf3n de empresas registradas"),e.k0s()(),e.j41(7,"div",4)(8,"button",5),e.nrm(9,"i",6),e.EFF(10," Nueva Empresa "),e.k0s()()(),e.j41(11,"div",7),e.DNE(12,b,4,0,"div",8)(13,F,7,1,"div",9)(14,R,4,2,"div",10),e.k0s()()),2&n&&(e.R7$(12),e.Y8G("ngIf",s.loading),e.R7$(),e.Y8G("ngIf",s.error),e.R7$(),e.Y8G("ngIf",!s.loading&&!s.error))},dependencies:[m.Sq,m.bT,l.Wk]})}}return t})()},{path:"nuevo",component:(()=>{class t{constructor(r,n,s){this.fb=r,this.businessService=n,this.router=s,this.loading=!1,this.error="",this.submitted=!1,this.empresaForm=this.fb.group({ruc:["",[a.k0.required,a.k0.pattern(/^[0-9]{13}$/)]],name:["",[a.k0.required,a.k0.maxLength(100)]],nameShort:["",[a.k0.maxLength(50)]],representativeLegal:["",[a.k0.maxLength(100)]],email:["",[a.k0.email]],address:["",[a.k0.maxLength(200)]],phone:["",[a.k0.maxLength(20)]]})}ngOnInit(){}get f(){return this.empresaForm.controls}onSubmit(){this.submitted=!0,!this.empresaForm.invalid&&(this.loading=!0,this.businessService.create(this.empresaForm.value).subscribe({next:()=>{this.router.navigate(["/dashboard/admin/empresas"])},error:r=>{this.error="Error al crear la empresa",console.error(r),this.loading=!1}}))}cancelar(){this.router.navigate(["/dashboard/admin/empresas"])}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(a.ok),e.rXU(u),e.rXU(l.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-nueva-empresa"]],decls:66,vars:32,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"text-sm","mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],["type","text","formControlName","ruc",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["type","text","formControlName","nameShort",1,"form-control",3,"ngClass"],["type","text","formControlName","representativeLegal",1,"form-control",3,"ngClass"],["type","email","formControlName","email",1,"form-control",3,"ngClass"],["type","text","formControlName","phone",1,"form-control",3,"ngClass"],[1,"col-md-12"],["formControlName","address","rows","3",1,"form-control",3,"ngClass"],["class","alert alert-danger",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","text-end"],["type","button",1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e.EFF(7,"Crear Nueva Empresa"),e.k0s()(),e.j41(8,"p",7),e.EFF(9," Ingrese los datos de la nueva empresa "),e.k0s()(),e.j41(10,"div",8)(11,"form",9),e.bIt("ngSubmit",function(){return s.onSubmit()}),e.j41(12,"div",1)(13,"div",10)(14,"div",11)(15,"label",12),e.EFF(16,"RUC"),e.k0s(),e.nrm(17,"input",13),e.DNE(18,x,3,2,"div",14),e.k0s()(),e.j41(19,"div",10)(20,"div",11)(21,"label",12),e.EFF(22,"Nombre de la Empresa"),e.k0s(),e.nrm(23,"input",15),e.DNE(24,T,3,2,"div",14),e.k0s()()(),e.j41(25,"div",1)(26,"div",10)(27,"div",11)(28,"label",12),e.EFF(29,"Nombre Corto"),e.k0s(),e.nrm(30,"input",16),e.DNE(31,D,2,1,"div",14),e.k0s()(),e.j41(32,"div",10)(33,"div",11)(34,"label",12),e.EFF(35,"Representante Legal"),e.k0s(),e.nrm(36,"input",17),e.DNE(37,U,2,1,"div",14),e.k0s()()(),e.j41(38,"div",1)(39,"div",10)(40,"div",11)(41,"label",12),e.EFF(42,"Email"),e.k0s(),e.nrm(43,"input",18),e.DNE(44,X,2,1,"div",14),e.k0s()(),e.j41(45,"div",10)(46,"div",11)(47,"label",12),e.EFF(48,"Tel\xe9fono"),e.k0s(),e.nrm(49,"input",19),e.DNE(50,B,2,1,"div",14),e.k0s()()(),e.j41(51,"div",1)(52,"div",20)(53,"div",11)(54,"label",12),e.EFF(55,"Direcci\xf3n"),e.k0s(),e.nrm(56,"textarea",21),e.DNE(57,V,2,1,"div",14),e.k0s()()(),e.DNE(58,w,2,1,"div",22),e.j41(59,"div",23)(60,"div",24)(61,"button",25),e.bIt("click",function(){return s.cancelar()}),e.EFF(62,"Cancelar"),e.k0s(),e.j41(63,"button",26),e.DNE(64,M,1,0,"span",27),e.EFF(65," Guardar "),e.k0s()()()()()()()()()),2&n&&(e.R7$(11),e.Y8G("formGroup",s.empresaForm),e.R7$(6),e.Y8G("ngClass",e.eq3(18,d,s.submitted&&s.f.ruc.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.ruc.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(20,d,s.submitted&&s.f.name.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.name.errors),e.R7$(6),e.Y8G("ngClass",e.eq3(22,d,s.submitted&&s.f.nameShort.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.nameShort.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(24,d,s.submitted&&s.f.representativeLegal.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.representativeLegal.errors),e.R7$(6),e.Y8G("ngClass",e.eq3(26,d,s.submitted&&s.f.email.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.email.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(28,d,s.submitted&&s.f.phone.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.phone.errors),e.R7$(6),e.Y8G("ngClass",e.eq3(30,d,s.submitted&&s.f.address.errors)),e.R7$(),e.Y8G("ngIf",s.submitted&&s.f.address.errors),e.R7$(),e.Y8G("ngIf",s.error),e.R7$(5),e.Y8G("disabled",s.loading),e.R7$(),e.Y8G("ngIf",s.loading))},dependencies:[m.YU,m.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD]})}}return t})()},{path:"editar/:id",component:(()=>{class t{constructor(r,n,s,c){this.fb=r,this.businessService=n,this.router=s,this.route=c,this.loading=!1,this.error="",this.submitted=!1,this.empresaId=+this.route.snapshot.paramMap.get("id"),this.empresaForm=this.fb.group({ruc:["",[a.k0.required,a.k0.pattern(/^[0-9]{13}$/)]],name:["",[a.k0.required,a.k0.maxLength(100)]],nameShort:["",[a.k0.maxLength(50)]],representativeLegal:["",[a.k0.maxLength(100)]],email:["",[a.k0.email]],address:["",[a.k0.maxLength(200)]],phone:["",[a.k0.maxLength(20)]]})}ngOnInit(){this.cargarEmpresa()}cargarEmpresa(){this.loading=!0,this.businessService.getById(this.empresaId).subscribe({next:r=>{this.empresaForm.patchValue({ruc:r.ruc,name:r.name,nameShort:r.nameShort,representativeLegal:r.representativeLegal,email:r.email,address:r.address,phone:r.phone}),this.loading=!1},error:r=>{this.error="Error al cargar los datos de la empresa",console.error(r),this.loading=!1}})}get f(){return this.empresaForm.controls}onSubmit(){this.submitted=!0,!this.empresaForm.invalid&&(this.loading=!0,this.businessService.update(this.empresaId,this.empresaForm.value).subscribe({next:()=>{this.router.navigate(["/dashboard/admin/empresas"])},error:r=>{this.error="Error al actualizar la empresa",console.error(r),this.loading=!1}}))}cancelar(){this.router.navigate(["/dashboard/admin/empresas"])}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(a.ok),e.rXU(u),e.rXU(l.Ix),e.rXU(l.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-editar-empresa"]],decls:14,vars:3,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"text-sm","mb-0"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],["type","text","formControlName","ruc",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["type","text","formControlName","nameShort",1,"form-control",3,"ngClass"],["type","text","formControlName","representativeLegal",1,"form-control",3,"ngClass"],["type","email","formControlName","email",1,"form-control",3,"ngClass"],["type","text","formControlName","phone",1,"form-control",3,"ngClass"],[1,"col-md-12"],["formControlName","address","rows","3",1,"form-control",3,"ngClass"],[1,"row","mt-3"],[1,"col-md-12","text-end"],["type","button",1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e.EFF(7,"Editar Empresa"),e.k0s()(),e.j41(8,"p",7),e.EFF(9," Modifique los datos de la empresa "),e.k0s()(),e.j41(10,"div",8),e.DNE(11,O,4,0,"div",9)(12,H,2,1,"div",10)(13,pe,54,31,"form",11),e.k0s()()()()()),2&n&&(e.R7$(11),e.Y8G("ngIf",s.loading&&!s.error),e.R7$(),e.Y8G("ngIf",s.error),e.R7$(),e.Y8G("ngIf",!s.loading))},dependencies:[m.YU,m.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD]})}}return t})()},{path:"detalle/:id",component:(()=>{class t{constructor(r,n,s){this.businessService=r,this.router=n,this.route=s,this.empresa=null,this.loading=!1,this.error="",this.empresaId=+this.route.snapshot.paramMap.get("id")}ngOnInit(){this.cargarEmpresa()}cargarEmpresa(){this.loading=!0,this.businessService.getById(this.empresaId).subscribe({next:r=>{this.empresa=r,this.loading=!1},error:r=>{this.error="Error al cargar los datos de la empresa",console.error(r),this.loading=!1}})}editar(){this.router.navigate(["/dashboard/admin/empresas/editar",this.empresaId])}volver(){this.router.navigate(["/dashboard/admin/empresas"])}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(u),e.rXU(l.Ix),e.rXU(l.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-detalle-empresa"]],decls:21,vars:3,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","pb-0"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"btn","btn-primary","btn-sm","mb-0","me-2",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-light","btn-sm","mb-0",3,"click"],[1,"fas","fa-arrow-left"],[1,"text-sm","mb-0"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"col-md-6"],[1,"text-uppercase","text-body","text-xs","font-weight-bolder"],[1,"col-6","py-2"],[1,"text-xs","text-secondary","mb-0"],[1,"col-12","py-2"],[1,"row","mt-4"],[1,"col-md-12"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e.EFF(7,"Detalles de la Empresa"),e.k0s(),e.j41(8,"div")(9,"button",7),e.bIt("click",function(){return s.editar()}),e.nrm(10,"i",8),e.EFF(11," Editar "),e.k0s(),e.j41(12,"button",9),e.bIt("click",function(){return s.volver()}),e.nrm(13,"i",10),e.EFF(14," Volver "),e.k0s()()(),e.j41(15,"p",11),e.EFF(16," Informaci\xf3n detallada de la empresa "),e.k0s()(),e.j41(17,"div",12),e.DNE(18,ue,4,0,"div",13)(19,fe,2,1,"div",14)(20,ve,64,15,"div",15),e.k0s()()()()()),2&n&&(e.R7$(18),e.Y8G("ngIf",s.loading),e.R7$(),e.Y8G("ngIf",s.error),e.R7$(),e.Y8G("ngIf",!s.loading&&!s.error&&s.empresa))},dependencies:[m.bT,m.vh]})}}return t})()}];let he=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild(Ee),l.iI]})}}return t})();var _e=o(3887);let ge=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[m.MD,a.X1,he,_e.G]})}}return t})()}}]);